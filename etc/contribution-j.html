<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Egisonのパターンマッチの新規性</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9772679-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>
<h1>Egisonのパターンマッチの新規性</h1>

<hr/>

<p>
  Egisonのパターンマッチの新規性は、正規形を持たないデータ(unfree data)に対する非線形パターンマッチ(non-linear pattern-matching)を実現したところにあります。<br/>
</p>

<p>
  正規形を持たないデータというのは、ひとつの決まった表現形が定まらないデータのことを言います。<br/>
  例えば、<code>{a, b, c}</code>というコレクションを集合として捉えたとき、<code>{b, a, c}</code>や<code>{a, b, b, c}</code>という表現も同じ<code>{a, b, c}</code>というコレクションを表します。<br/>
</p>

<p>
  非線形パターンマッチというのは、同じ変数が複数回パターン内に現れるパターンに対するパターンマッチのことを言います。<br/>
  Egisonには、バリューパターン(value pattern)というのがあり、このようなパターンに対するパターンマッチを表現出来ます。<br/>
</p>

<p>
  正規形を持たないデータに対するパターンマッチの研究は、今までにいくつもあったのですが、どれも非線形パターンマッチを行うことができるものはありませんでした。<br/>
  しかし、正規形を持たないデータに対するパターンマッチを有用なものにするには、非線形パターンマッチが可能なことが必須です。<br/>
<!--
  従来の代数的データ型のみに対するパターンマッチは、帰納的なデータ型の定義に基づき、データの中身を取り出すだけですが、<br/>
  例えば集合などのように、複数の表現形を持つ正規形を持たないデータに対するパターンマッチは、複数の表現形を試す探索を行う必要があるからです。<br/>
-->
  <a href="../manual3/poker-hands.html">Egisonの「ポーカーの役判定」のサンプルコード</a>を見ていただけると非線形パターンマッチの強力さがよくわかっていただけると思います。<br/>
</p>

<p>
  非線形パターンマッチについて考え始めると、正規形を持たないデータに対するパターンマッチの研究は一段と難しくなります。<br/>
  このための構文と内部実装の設計を行い、最初のEgisonの実装にとりかかるまでには1年以上の期間を要しました。<br/>
  Egisonは、パターンマッチはパターンの先頭部分から順番に行われるというルールと、バリューパターンというパターンの導入により、非線形パターンマッチを実現しています。<br/>
</p>

<p>
  最初のEgisonをリリースして1年後にリリースされたEgison2では、パターン内にバリューパターンが含まれる場合について無駄な探索を行わずにパターンマッチが行えるようになりました。<br/>
  この機能は、マッチャー(matcher)というデータ型毎にパターンマッチの方法を定義するための構文の中で、パターンに対するパターンマッチを行うようにすることで実現されました。<br/>
</p>

<p>
  Egison2をリリースして半年後、<a href="http://www.murakumo-tech.jp">Murakumo</a>で開発を開始したEgison3では、パターンを引数に取りパターンを返すパターン関数(pattern function)という概念を導入することによって、パターン内の変数の静的スコープを実現しました。<br/>
  <a href="../manual3/mahjong.html">Egisonの「麻雀のあがり判定」のサンプルコード</a>を見ていただけるとパターン関数の使い方について理解していただけると思います。<br/>
  正規形を持たないデータに対する非線形パターンマッチの変数スコープ問題は、非常に難しい問題でした。<br/>
  この問題については解決案を解説したページがあるので是非読んでいただけると嬉しいです。(<a href="../manual3/mechanism.html">Pattern Matching Mechanism of Egison3</a>)<br/>
</p>

<p>
  Egisonには他にも添字変数やループ構文といった独自のアイデアがいくつも詰め込まれています。<br/>
  是非マニュアルを読んだりサンプルコードを見てその面白さを感じていただけるとありがたいです。<br/>
</p>

<hr/>
<p>
  [<a href="../index-j.html">Egison Top</a>]
</p>

</body>

<footer>
  <table width=100% border=0 cellspacing=0>
    <tr>
      <td align=left>
        <i>
          Copyright (C) 2011-2013 <a href="http://egi.pira.jp/index-j.html">Satoshi Egi</a>
        </i>
    </tr>
  </table>
</footer>

</html>
