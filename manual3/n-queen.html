<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Egison Users Manual</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
<link rel="stylesheet" type="text/css" href="../style.css">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9772679-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>
    
<nav>
  <ul>
    <li><a href="./graph.html">Prev</a></li>
    <li><a href="./index.html">Index</a></li>
    <li><a href="./mahjong.html">Next</a></li>
    <li><a href="../index.html">Home</a></li>
  </ul>
  <p>Egison User Manual Version 3</p>
</nav>

<h1>Example : N-Queen</h1>

<pre><code>(define $eight-queen
  (match-all {1 2 3 4 5 6 7 8} (multiset integer)
    [&lt;cons $a_1
      &lt;cons (& ^,(- a_1 1) ^,(+ a_1 1)
               $a_2)
       &lt;cons (& ^,(- a_1 2) ^,(+ a_1 2)
                ^,(- a_2 1) ^,(+ a_2 1)
                $a_3)
        &lt;cons (& ^,(- a_1 3) ^,(+ a_1 3)
                 ^,(- a_2 2) ^,(+ a_2 2)
                 ^,(- a_3 1) ^,(+ a_3 1)
                 $a_4)
          &lt;cons (& ^,(- a_1 4) ^,(+ a_1 4)
                   ^,(- a_2 3) ^,(+ a_2 3)
                   ^,(- a_3 2) ^,(+ a_3 2)
                   ^,(- a_4 1) ^,(+ a_4 1)
                   $a_5)
           &lt;cons (& ^,(- a_1 5) ^,(+ a_1 5)
                    ^,(- a_2 4) ^,(+ a_2 4)
                    ^,(- a_3 3) ^,(+ a_3 3)
                    ^,(- a_4 2) ^,(+ a_4 2)
                    ^,(- a_5 1) ^,(+ a_5 1)
                    $a_6)
            &lt;cons (& ^,(- a_1 6) ^,(+ a_1 6)
                     ^,(- a_2 5) ^,(+ a_2 5)
                     ^,(- a_3 4) ^,(+ a_3 4)
                     ^,(- a_4 3) ^,(+ a_4 3)
                     ^,(- a_5 2) ^,(+ a_5 2)
                     ^,(- a_6 1) ^,(+ a_6 1)
                     $a_7)
             &lt;cons (& ^,(- a_1 7) ^,(+ a_1 7)
                      ^,(- a_2 6) ^,(+ a_2 6)
                      ^,(- a_3 5) ^,(+ a_3 5)
                      ^,(- a_4 4) ^,(+ a_4 4)
                      ^,(- a_5 3) ^,(+ a_5 3)
                      ^,(- a_6 2) ^,(+ a_6 2)
                      ^,(- a_7 1) ^,(+ a_7 1)
                      $a_8)
              &lt;nil&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
     [a_1 a_2 a_3 a_4 a_5 a_6 a_7 a_8]]))
</code></pre>


<pre><code>&gt; eight-queen
{[1 5 8 6 3 7 2 4] [1 6 8 3 7 4 2 5] [1 7 4 6 8 2 5 3] [1 7 5 8 2 4 6 3]
 [2 4 6 8 3 1 7 5] [2 5 7 1 3 8 6 4] [2 5 7 4 1 8 6 3] [2 6 1 7 4 8 3 5]
 [2 6 8 3 1 4 7 5] [2 7 3 6 8 5 1 4] [2 7 5 8 1 4 6 3] [2 8 6 1 3 5 7 4]
 [3 1 7 5 8 2 4 6] [3 5 2 8 1 7 4 6] [3 5 2 8 6 4 7 1] [3 5 7 1 4 2 8 6]
 [3 5 8 4 1 7 2 6] [3 6 2 5 8 1 7 4] [3 6 2 7 1 4 8 5] [3 6 2 7 5 1 8 4]
 [3 6 4 1 8 5 7 2] [3 6 4 2 8 5 7 1] [3 6 8 1 4 7 5 2] [3 6 8 1 5 7 2 4]
 [3 6 8 2 4 1 7 5] [3 7 2 8 5 1 4 6] [3 7 2 8 6 4 1 5] [3 8 4 7 1 6 2 5]
 [4 1 5 8 2 7 3 6] [4 1 5 8 6 3 7 2] [4 2 5 8 6 1 3 7] [4 2 7 3 6 8 1 5]
 [4 2 7 3 6 8 5 1] [4 2 7 5 1 8 6 3] [4 2 8 5 7 1 3 6] [4 2 8 6 1 3 5 7]
 [4 6 1 5 2 8 3 7] [4 6 8 2 7 1 3 5] [4 6 8 3 1 7 5 2] [4 7 1 8 5 2 6 3]
 [4 7 3 8 2 5 1 6] [4 7 5 2 6 1 3 8] [4 7 5 3 1 6 8 2] [4 8 1 3 6 2 7 5]
 [4 8 1 5 7 2 6 3] [4 8 5 3 1 7 2 6] [5 1 4 6 8 2 7 3] [5 1 8 4 2 7 3 6]
 [5 1 8 6 3 7 2 4] [5 2 4 6 8 3 1 7] [5 2 4 7 3 8 6 1] [5 2 6 1 7 4 8 3]
 [5 2 8 1 4 7 3 6] [5 3 1 6 8 2 4 7] [5 3 1 7 2 8 6 4] [5 3 8 4 7 1 6 2]
 [5 7 1 3 8 6 4 2] [5 7 1 4 2 8 6 3] [5 7 2 4 8 1 3 6] [5 7 2 6 3 1 4 8]
 [5 7 2 6 3 1 8 4] [5 7 4 1 3 8 6 2] [5 8 4 1 3 6 2 7] [5 8 4 1 7 2 6 3]
 [6 1 5 2 8 3 7 4] [6 2 7 1 3 5 8 4] [6 2 7 1 4 8 5 3] [6 3 1 7 5 8 2 4]
 [6 3 1 8 4 2 7 5] [6 3 1 8 5 2 4 7] [6 3 5 7 1 4 2 8] [6 3 5 8 1 4 2 7]
 [6 3 7 2 4 8 1 5] [6 3 7 2 8 5 1 4] [6 3 7 4 1 8 2 5] [6 4 1 5 8 2 7 3]
 [6 4 2 8 5 7 1 3] [6 4 7 1 3 5 2 8] [6 4 7 1 8 2 5 3] [6 8 2 4 1 7 5 3]
 [7 1 3 8 6 4 2 5] [7 2 4 1 8 5 3 6] [7 2 6 3 1 4 8 5] [7 3 1 6 8 5 2 4]
 [7 3 8 2 5 1 6 4] [7 4 2 5 8 1 3 6] [7 4 2 8 6 1 3 5] [7 5 3 1 6 8 2 4]
 [8 2 4 1 7 5 3 6] [8 2 5 3 1 7 4 6] [8 3 1 6 2 5 7 4] [8 4 1 3 6 2 7 5]}
</code></pre>

<pre><code>(define $n-queen
  (lambda [$n]
    (match-all (between 1 n) (multiset integer)
      [&lt;cons $a_1
             (loop $i (between 2 n)
                   &lt;cons (loop $i1 (between 1 (- i 1))
                               (& ^,(- a_i1 (- i i1))
                                  ^,(+ a_i1 (- i i1))
                                  ...)
                               $a_i)
                         ...&gt;
                   &lt;nil&gt;)&gt;
       a])))
</code></pre>

<pre><code>&gt; (n-queen 8)
<i>omitted.</i>
</code></pre>

<footer>
  Copyright (C) 2011-2013 <a href="http://egison.org/~egi/index.html">Satoshi Egi</a>
</footer>

</body>

</html>

